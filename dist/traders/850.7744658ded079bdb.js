"use strict";(self.webpackChunktraders=self.webpackChunktraders||[]).push([[850],{5850:(q,p,a)=>{a.r(p),a.d(p,{StatementModule:()=>O});var c=a(6895),C=a(4575),i=a(5439),t=a(4650),M=a(2566),_=a(3679),f=a(6704),S=a(433),Z=a(8231),v=a(6616),A=a(7044),T=a(1811),D=a(5259),z=a(1949);function J(e,r){if(1&e&&t._UZ(0,"nz-option",12),2&e){const n=r.$implicit;t.Q6J("nzLabel",n.name)("nzValue",n)}}function x(e,r){if(1&e&&(t.TgZ(0,"tr",14)(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t._UZ(10,"td"),t.qZA()),2&e){const n=r.$implicit;t.xp6(2),t.Oqu(t.xi3(3,4,n.bill_date,"dd/MM/yy")),t.xp6(3),t.Oqu(n.quantity),t.xp6(2),t.Oqu(n.rate),t.xp6(2),t.Oqu(n.total_amount)}}function Y(e,r){if(1&e&&(t.TgZ(0,"table",13)(1,"tr",14)(2,"th"),t._uU(3,"Date"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Quantity"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Rate"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Amount"),t.qZA()(),t.YNc(10,x,11,7,"tr",15),t.qZA()),2&e){const n=t.oxw();t.xp6(10),t.Q6J("ngForOf",n.statement)}}const y=[{path:"",component:(()=>{class e{constructor(n){this.mainService=n,this.from_date=new Date,this.to_date=new Date,this.todayDate="",this.customersData=[],this.statement=[]}ngOnInit(){this.getCustomers()}getCustomerStatement(n){this.mainService.getStatement({customer_id:n,bill_date:this.todayDate}).subscribe(s=>{console.log("data: ",s)},s=>(console.log("get customers err ",s),s))}onChange(n){}getCustomers(){this.mainService.spinning.emit(!0),this.mainService.getCustomers({}).subscribe(o=>{const s=o.data;this.mainService.spinning.emit(!1),this.customersData=s},o=>{console.log("get customers err ",o),this.mainService.spinning.emit(!1),this.customersData=[]})}onCustomerSelect(n){}getStatement(){this.statement=[];const n=i(this.from_date).format("YYYY-MM-DD")+"T00:00:00.000Z",o=i(this.to_date).format("YYYY-MM-DD")+"T00:00:00.000Z";console.log("this.from_date: ",i(this.from_date).format("YYYY-MM-DD")),console.log("this.to_date: ",i(this.to_date).format("YYYY-MM-DD")),console.log("onCustomerSelect selected: ",this.selectedCustomer);const s=i(this.from_date).format("DD");console.log("startDate: ",s);const l=i(this.to_date).format("DD");console.log("toDate: ",l),console.log("fromCollection: ",this.from_date.getDate());let h=[],g=-1,u=-1;this.selectedCustomer.customerCollection.forEach((d,m)=>{n===d.bill_date&&(g=m),o===d.bill_date&&(u=m)}),console.log("firstIndex: ",g),console.log("secondIndex: ",u),this.selectedCustomer.customerCollection.forEach((d,m)=>{(m===g||m<=u)&&(console.log("coll i: ",m),console.log("coll firstIndex: ",g),console.log("coll secondIndex: ",u),h.push(d))}),console.log("collections: ",h),h.forEach(d=>{d.records.forEach(m=>{this.statement.push(m)})})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(M.J))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-statement"]],decls:31,vars:22,consts:[[1,"date-picker"],["nz-row",""],["nz-col","","nzSpan","6"],["nzRequired","",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],[3,"ngModel","nzAllowClear","ngModelChange"],["nzShowSearch","","nzAllowClear","",3,"nzAutoFocus","ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"click"],["style","width: 100%;",4,"ngIf"],[3,"nzLabel","nzValue"],[2,"width","100%"],[2,"text-align","left"],["style","text-align: left;",4,"ngFor","ngForOf"]],template:function(n,o){1&n&&(t.TgZ(0,"h2"),t._uU(1,"Statement"),t.qZA(),t.TgZ(2,"div",0)(3,"div",1)(4,"div",2)(5,"nz-form-item")(6,"nz-form-label",3),t._uU(7,"Date"),t.qZA(),t.TgZ(8,"nz-form-control",4)(9,"nz-date-picker",5),t.NdJ("ngModelChange",function(l){return o.from_date=l})("ngModelChange",function(l){return o.onChange(l)}),t.qZA()()()(),t.TgZ(10,"div",2)(11,"nz-form-item")(12,"nz-form-label",3),t._uU(13,"Date"),t.qZA(),t.TgZ(14,"nz-form-control",4)(15,"nz-date-picker",5),t.NdJ("ngModelChange",function(l){return o.to_date=l})("ngModelChange",function(l){return o.onChange(l)}),t.qZA()()()(),t.TgZ(16,"div",2)(17,"nz-form-item")(18,"nz-form-label",3)(19,"span"),t._uU(20,"Customer"),t.qZA()(),t.TgZ(21,"nz-form-control",4)(22,"nz-select",6),t.NdJ("ngModelChange",function(l){return o.selectedCustomer=l})("ngModelChange",function(l){return o.onCustomerSelect(l)}),t.YNc(23,J,1,2,"nz-option",7),t.qZA()()()(),t.TgZ(24,"div",2)(25,"nz-form-item",8)(26,"nz-form-control",9)(27,"button",10),t.NdJ("click",function(){return o.getStatement()}),t._uU(28,"Submit"),t.qZA(),t._uU(29,"\xa0 "),t.qZA()()()(),t.YNc(30,Y,11,1,"table",11),t.qZA()),2&n&&(t.xp6(6),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24),t.xp6(1),t.Q6J("ngModel",o.from_date)("nzAllowClear",!1),t.xp6(3),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24),t.xp6(1),t.Q6J("ngModel",o.to_date)("nzAllowClear",!1),t.xp6(3),t.Q6J("nzSm",6)("nzXs",24),t.xp6(3),t.Q6J("nzSm",14)("nzXs",24),t.xp6(1),t.Q6J("nzAutoFocus",!0)("ngModel",o.selectedCustomer),t.xp6(1),t.Q6J("ngForOf",o.customersData),t.xp6(3),t.Q6J("nzSpan",14)("nzOffset",6),t.xp6(4),t.Q6J("ngIf",o.statement&&o.statement.length>0))},dependencies:[c.sg,c.O5,_.t3,_.SK,f.Nx,f.iK,f.Fd,S.JJ,S.On,Z.Ip,Z.Vq,v.ix,A.w,T.dQ,D.uw,z.Uo,z._C,z.$Z,c.uU],styles:["h2[_ngcontent-%COMP%]{text-align:center;margin-top:10px}"]}),e})()}];let U=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[C.Bz.forChild(y),C.Bz]}),e})();var Q=a(9912);let O=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,U,Q.m]}),e})()}}]);