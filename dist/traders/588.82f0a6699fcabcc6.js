"use strict";(self.webpackChunktraders=self.webpackChunktraders||[]).push([[588],{588:(f,s,a)=>{a.r(s),a.d(s,{BillPrintModule:()=>T});var g=a(6895),c=a(4575),u=a(5439),t=a(4650),Z=a(2566),p=a(1949);function h(i,o){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",11),t._uU(6),t.qZA(),t.TgZ(7,"td",11),t._uU(8),t.qZA()()),2&i){const n=o.$implicit;t.xp6(2),t.Oqu(n.vegetable_name),t.xp6(2),t.Oqu(n.quantity),t.xp6(2),t.Oqu(n.rate),t.xp6(2),t.Oqu(n.total_amount)}}function _(i,o){if(1&i&&(t.TgZ(0,"div",3)(1,"table",4)(2,"tr")(3,"td",5)(4,"span",6),t._uU(5,"Sri Sainath Traders"),t.qZA(),t._uU(6," (9640443322)"),t.qZA()(),t.TgZ(7,"tr")(8,"td",7),t._uU(9),t.qZA(),t.TgZ(10,"td",7)(11,"span"),t._uU(12),t.qZA(),t._uU(13),t.qZA()(),t.TgZ(14,"tr")(15,"td",8),t._UZ(16,"hr",9),t.qZA()(),t.YNc(17,h,9,4,"tr",10),t.TgZ(18,"tr"),t._UZ(19,"td")(20,"td")(21,"td"),t.TgZ(22,"td"),t._UZ(23,"hr",9),t.qZA()(),t.TgZ(24,"tr"),t._UZ(25,"td")(26,"td")(27,"td"),t.TgZ(28,"td",11),t._uU(29),t.qZA()(),t.TgZ(30,"tr")(31,"td"),t._uU(32,"Op. Bal"),t.qZA(),t._UZ(33,"td"),t.TgZ(34,"td",11),t._uU(35),t.qZA(),t._UZ(36,"td"),t.qZA(),t.TgZ(37,"tr")(38,"td"),t._uU(39,"Cash"),t.qZA(),t._UZ(40,"td"),t.TgZ(41,"td",11),t._uU(42),t.qZA(),t._UZ(43,"td"),t.qZA(),t.TgZ(44,"tr"),t._UZ(45,"td")(46,"td"),t.TgZ(47,"td"),t._UZ(48,"hr",9),t.qZA(),t.TgZ(49,"td"),t._UZ(50,"hr",9),t.qZA()(),t.TgZ(51,"tr"),t._UZ(52,"td")(53,"td"),t.TgZ(54,"td",11),t._uU(55),t.qZA(),t.TgZ(56,"td",11),t._uU(57),t.qZA()(),t.TgZ(58,"tr"),t._UZ(59,"td")(60,"td"),t.TgZ(61,"td"),t._UZ(62,"hr",9),t.qZA(),t.TgZ(63,"td"),t._UZ(64,"hr",9),t.qZA()(),t.TgZ(65,"tr"),t._UZ(66,"td")(67,"td")(68,"td"),t.TgZ(69,"td",11),t._uU(70),t.qZA()()()()),2&i){const n=o.$implicit,e=t.oxw();t.xp6(9),t.Oqu(n.name),t.xp6(3),t.Oqu(0===e.day?"Sun,":1===e.day?"Mon,":2===e.day?"Tue,":3===e.day?"Wed,":4===e.day?"Thu,":5===e.day?"Fri,":6===e.day?"Sat,":""),t.xp6(1),t.hij(" ",e.todayDate," "),t.xp6(4),t.Q6J("ngForOf",n.bills),t.xp6(12),t.Oqu(n.bill_amount),t.xp6(6),t.Oqu(n.collected_amount),t.xp6(7),t.Oqu(n.last_amount_updated),t.xp6(13),t.Oqu(n.balance),t.xp6(2),t.Oqu(n.balance),t.xp6(13),t.Oqu(n.total_bill)}}const b=[{path:"",component:(()=>{class i{constructor(n){this.mainService=n,this.isVisible=!1,this.todayDate="",this.day=0,this.tablestring="",this.printData=[]}ngOnInit(){const n=new Date;this.day=n.getDay(),this.todayDate=u(n).format("DD/MM/YYYY"),this.printCustomerBills()}showModal(){this.isVisible=!0}handleOk(){console.log("Button ok clicked!"),this.isVisible=!1}handleCancel(){console.log("Button cancel clicked!"),this.isVisible=!1}print(){window.open()}getbalance_statement(){this.mainService.get_balance_statement({}).subscribe(e=>{console.log("getbalance_statement data: ",e),e.table&&(this.tablestring=e.table)},e=>{console.log("get customers err ",e)})}printCustomerBills(){const e=u(new Date).format("YYYY-MM-DD");console.log("new1: ",e);const m={skip:0,limit:1e3,bill_date:e};console.log("requestBody: ",m),this.mainService.spinning.emit(!0),this.mainService.printCustomerBills(m).subscribe(d=>{let r;console.log("customer_bills: ",r),d.forEach(l=>{l.balance=l.collected_amount-l.last_amount_updated,l.bill_amount=0,l.bills.forEach(U=>{l.bill_amount=l.bill_amount+U.total_amount}),l.total_bill=l.bill_amount-l.balance}),r=d,console.log("after customer_bills: ",r),r&&(this.printData=r),this.mainService.spinning.emit(!1)},d=>{console.log("get customers err ",d),this.mainService.spinning.emit(!1)})}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(Z.J))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-bill-print"]],decls:4,vars:1,consts:[[1,"header-print"],[1,"container"],["class","bill",4,"ngFor","ngForOf"],[1,"bill"],[2,"width","100%"],["colspan","4",1,"text-center"],[1,"shop-title"],["colspan","2"],["colspan","4",2,"width","100%"],[2,"border","1px dashed #000"],[4,"ngFor","ngForOf"],[1,"number"]],template:function(n,e){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Bill Print"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,_,71,10,"div",2),t.qZA()),2&n&&(t.xp6(3),t.Q6J("ngForOf",e.printData))},dependencies:[g.sg,p.Uo,p.$Z],styles:[".shop-title[_ngcontent-%COMP%]{color:#06f706}.print-box-width[_ngcontent-%COMP%]{width:386px;height:365px}body[_ngcontent-%COMP%]{margin:0;padding:0}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,2fr);grid-gap:20px;margin:20px}.bill[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #000;padding:10px;box-sizing:border-box;page-break-inside:avoid}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1px 10px}.number[_ngcontent-%COMP%]{text-align:right!important}@page{size:A4;margin:0}@media print{body[_ngcontent-%COMP%]{margin:.5cm}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,2fr);grid-gap:20px;margin:0}.bill[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #000;padding:10px;box-sizing:border-box;page-break-inside:avoid}.header-print[_ngcontent-%COMP%]{display:none}}"]}),i})()}];let q=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[c.Bz.forChild(b),c.Bz]}),i})();var x=a(9912);let T=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.ez,x.m,q]}),i})()}}]);