"use strict";(self.webpackChunktraders=self.webpackChunktraders||[]).push([[956],{3956:(q,g,i)=>{i.r(g),i.d(g,{CustomerCollectionModule:()=>Q});var u=i(6895),z=i(2564),s=i(433),f=i(5439),n=i(4650),h=i(9651),_=i(2566),v=i(1102),C=i(3679),c=i(6704),d=i(5635),p=i(8231),S=i(6616),T=i(7044),Z=i(1811),x=i(5259),m=i(7635),A=i(6497),O=i(1634);function F(o,r){if(1&o&&n._UZ(0,"nz-option",26),2&o){const t=r.$implicit;n.Q6J("nzLabel",t.name)("nzValue",t)}}function J(o,r){if(1&o){const t=n.EpF();n.TgZ(0,"span",28),n.NdJ("click",function(){n.CHM(t);const a=n.oxw(2);return n.KtG(a.clearfield("notes"))}),n.qZA()}}function y(o,r){if(1&o&&n.YNc(0,J,1,0,"span",27),2&o){const t=n.oxw();n.Q6J("ngIf",t.validateForm.controls.notes.value)}}function P(o,r){if(1&o){const t=n.EpF();n.TgZ(0,"tr")(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td")(8,"a",29),n.NdJ("nzOnConfirm",function(){const l=n.CHM(t).$implicit,U=n.oxw();return n.KtG(U.deleteConfirm(l._id))})("nzOnCancel",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.cancel())}),n._UZ(9,"span",30),n.qZA()()()}if(2&o){const t=r.$implicit;n.xp6(2),n.Oqu(t.customer_name),n.xp6(2),n.Oqu(t.amount),n.xp6(2),n.Oqu(t.notes)}}const b=[{path:"",component:(()=>{class o{constructor(t,e,a,l){this.fb=t,this.el=e,this.message=a,this.mainService=l,this.customers=[{name:"Srinivas",id:"c1"},{name:"Sai",id:"c2"},{name:"Raju",id:"c3"},{name:"Chandu",id:"c4"}],this.vegetablesList=[{name:"Cabage",id:"v1"},{name:"Onion",id:"v2"},{name:"Potato",id:"v3"},{name:"Tomato",id:"v4"}],this.farmersList=[{name:"Teja",id:"f1"},{name:"Ravi",id:"f2"},{name:"Venkatesh",id:"f3"},{name:"Sai",id:"f4"}],this.date=new Date,this.defaultDate=new Date,this.collectionsData=[],this.sort=["ascend"],this.listOfColumns=[{name:"Name",sortOrder:"ascend"},{item:"Item",sortOrder:null},{rate:"Rate",sortOrder:null},{quantity:"quantity",sortOrder:null}],this.index=1,this.total=0,this.pageSize=10,this.loading=!1}ngOnInit(){this.validateForm=this.fb.group({customer:[null,[s.kI.required]],amount:[null,[s.kI.required]],date:[this.date,[s.kI.required]],notes:[null]}),this.getCustomers(),this.getCollections()}getCollections(){const t={skip:this.index,limit:this.pageSize};document.getElementById("amountCollection")?.focus(),this.loading=!0,this.mainService.getCollections(t).subscribe(e=>{this.collectionsData=e.data,this.total=e.total,this.loading=!1},e=>{console.log("get customers err ",e),this.collectionsData=[],this.loading=!1})}getCustomers(){this.mainService.getCustomers({}).subscribe(e=>{this.customers=e.data},e=>{console.log("get customers err ",e),this.customers=[]})}clearfield(t){this.validateForm.controls[t].reset()}submitForm(){if(this.validateForm.valid){const t=f(this.validateForm.value.date).format("YYYY-MM-DDTHH:mm:ss.000");this.mainService.createCollection({customer_name:this.validateForm.value.customer.name,customer_id:this.validateForm.value.customer._id,notes:this.validateForm.value.notes,amount:this.validateForm.value.amount,collection_date:t}).subscribe(a=>{this.message.create("success","Collection added Successfully"),this.reset(),this.loading=!0,this.getCollections()},a=>{console.log("get customers err ",a),this.loading=!1,this.getCollections()})}else Object.values(this.validateForm.controls).forEach(t=>{t.invalid&&(t.markAsDirty(),t.updateValueAndValidity({onlySelf:!0}))})}reset(){this.validateForm.controls.amount.reset(),this.validateForm.controls.notes.reset()}onChange(t){}deleteConfirm(t){this.loading=!0,this.mainService.removeCollection(t).subscribe(e=>{this.loading=!1,e&&e.success&&(this.message.create("success",e.message),this.getCollections())},e=>{console.log("get customers err ",e),this.loading=!1})}cancel(){}onPageSizeChange(t){this.pageSize=t,this.getCollections()}onPageChange(t){this.index=t,this.getCollections()}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(s.QS),n.Y36(n.SBq),n.Y36(h.dD),n.Y36(_.J))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-customer-collection"]],decls:56,vars:34,consts:[[1,"customer-form"],["nz-row",""],["nz-col","","nzSpan","12"],["nz-form","","appFocus","",3,"formGroup","ngSubmit"],["nzRequired","",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["formControlName","date",3,"ngModel","nzAllowClear","ngModelChange"],["nzShowSearch","","nzAllowClear","","formControlName","customer","id","customersCollection"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzFor","amountCollection","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Add amount!",3,"nzSm","nzXs"],["id","amountCollection","type","number","formControlName","amount",3,"min","step"],["nzFor","notes",3,"nzSm","nzXs"],["nzErrorTip","Please input your notes!",3,"nzSm","nzXs","nzValidateStatus"],[1,"ant-input-affix-wrapper-textarea-with-clear-btn",3,"nzSuffix"],["nz-input","","formControlName","notes","placeholder","Notes"],["textAreaClearNotes",""],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary"],["nz-button","","nzType","default",3,"click"],[3,"nzData","nzLoading","nzShowPagination"],["basicTable",""],[4,"ngFor","ngForOf"],[1,"text-right"],[3,"nzPageIndex","nzTotal","nzShowSizeChanger","nzPageSize","nzPageIndexChange","nzPageSizeChange"],[3,"nzLabel","nzValue"],["nz-icon","","class","ant-input-clear-icon","nzTheme","fill","nzType","close-circle",3,"click",4,"ngIf"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon",3,"click"],["nz-popconfirm","","nzPopconfirmTitle","Are you sure delete this Collection","nzPopconfirmPlacement","bottom",3,"nzOnConfirm","nzOnCancel"],["nz-icon","","nzType","delete","nzTheme","fill"]],template:function(t,e){if(1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),n.NdJ("ngSubmit",function(){return e.submitForm()}),n.TgZ(4,"nz-form-item")(5,"nz-form-label",4),n._uU(6,"Date"),n.qZA(),n.TgZ(7,"nz-form-control",5)(8,"nz-date-picker",6),n.NdJ("ngModelChange",function(l){return e.date=l})("ngModelChange",function(l){return e.onChange(l)}),n.qZA()()(),n.TgZ(9,"nz-form-item")(10,"nz-form-label",4)(11,"span"),n._uU(12,"Customer"),n.qZA()(),n.TgZ(13,"nz-form-control",5)(14,"nz-select",7),n.YNc(15,F,1,2,"nz-option",8),n.qZA()()(),n.TgZ(16,"nz-form-item")(17,"nz-form-label",9)(18,"span"),n._uU(19,"Amount"),n.qZA()(),n.TgZ(20,"nz-form-control",10),n._UZ(21,"input",11),n.qZA()(),n.TgZ(22,"nz-form-item")(23,"nz-form-label",12),n._uU(24,"Notes"),n.qZA(),n.TgZ(25,"nz-form-control",13)(26,"nz-input-group",14),n._UZ(27,"textarea",15),n.qZA(),n.YNc(28,y,1,1,"ng-template",null,16,n.W1O),n.qZA()(),n.TgZ(30,"nz-form-item",17)(31,"nz-form-control",18)(32,"button",19),n._uU(33,"Create"),n.qZA(),n._uU(34,"\xa0 "),n.TgZ(35,"button",20),n.NdJ("click",function(){return e.reset()}),n._uU(36,"Reset"),n.qZA()()()()(),n.TgZ(37,"div",2)(38,"nz-table",21,22)(40,"thead")(41,"tr")(42,"th"),n._uU(43,"Customer Name"),n.qZA(),n.TgZ(44,"th"),n._uU(45,"Amount"),n.qZA(),n.TgZ(46,"th"),n._uU(47,"Notes"),n.qZA(),n.TgZ(48,"th"),n._uU(49,"Actions"),n.qZA()()(),n.TgZ(50,"tbody"),n.YNc(51,P,10,3,"tr",23),n.qZA()(),n.TgZ(52,"div",24),n._UZ(53,"br"),n.TgZ(54,"nz-pagination",25),n.NdJ("nzPageIndexChange",function(l){return e.onPageChange(l)})("nzPageSizeChange",function(l){return e.onPageSizeChange(l)}),n.qZA(),n._UZ(55,"br"),n.qZA()()()()),2&t){const a=n.MAs(29);n.xp6(3),n.Q6J("formGroup",e.validateForm),n.xp6(2),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24),n.xp6(1),n.Q6J("ngModel",e.date)("nzAllowClear",!1),n.xp6(2),n.Q6J("nzSm",6)("nzXs",24),n.xp6(3),n.Q6J("nzSm",14)("nzXs",24),n.xp6(2),n.Q6J("ngForOf",e.customers),n.xp6(2),n.Q6J("nzSm",6)("nzXs",24),n.xp6(3),n.Q6J("nzSm",14)("nzXs",24),n.xp6(1),n.Q6J("min",1)("step",1),n.xp6(2),n.Q6J("nzSm",6)("nzXs",24),n.xp6(2),n.Q6J("nzSm",14)("nzXs",24)("nzValidateStatus",e.validateForm.controls.notes),n.xp6(1),n.Q6J("nzSuffix",a),n.xp6(5),n.Q6J("nzSpan",14)("nzOffset",6),n.xp6(7),n.Q6J("nzData",e.collectionsData)("nzLoading",e.loading)("nzShowPagination",!1),n.xp6(13),n.Q6J("ngForOf",e.collectionsData),n.xp6(3),n.Q6J("nzPageIndex",e.index)("nzTotal",e.total)("nzShowSizeChanger",!0)("nzPageSize",e.pageSize)}},dependencies:[u.sg,u.O5,v.Ls,C.t3,C.SK,c.Lr,c.Nx,c.iK,c.Fd,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.qQ,s.sg,s.u,d.Zp,d.gB,d.ke,p.Ip,p.Vq,S.ix,T.w,Z.dQ,x.uw,m.N8,m.Uo,m._C,m.Om,m.p0,m.$Z,A.JW,O.dE],styles:["[nz-form][_ngcontent-%COMP%]{max-width:600px}.phone-select[_ngcontent-%COMP%]{width:70px}.register-are[_ngcontent-%COMP%]{margin-bottom:8px}.customer-form[_ngcontent-%COMP%]{margin-top:20px}nz-date-picker[_ngcontent-%COMP%]{margin:0 8px 12px 0}input[type=number][_ngcontent-%COMP%]{border:1px solid #d9d9d9!important}input[type=number][_ngcontent-%COMP%]:focus{border:1px solid #40a9ff!important}.text-right[_ngcontent-%COMP%]{text-align:right!important}"]}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[z.Bz.forChild(b),z.Bz]}),o})();var N=i(4973);let Q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[u.ez,M,N.m]}),o})()}}]);