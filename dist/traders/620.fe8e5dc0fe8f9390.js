"use strict";(self.webpackChunktraders=self.webpackChunktraders||[]).push([[620],{8620:(G,u,o)=>{o.r(u),o.d(u,{DayCollectionsModule:()=>w});var c=o(6895),m=o(4575),r=o(433),y=o(5439),z=o(6166),_=o(4159),v=o.n(_),t=o(4650),Z=o(9651),T=o(2566),x=o(1102),f=o(3679),d=o(6704),M=o(6616),O=o(7044),P=o(1811),B=o(5259),h=o(1949),D=o(1634);const S=["dayBillTable"];function A(e,l){if(1&e){const n=t.EpF();t.TgZ(0,"a",22),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.downloadPDF())}),t._UZ(1,"span",23),t.qZA()}}function b(e,l){if(1&e){const n=t.EpF();t.TgZ(0,"a",24),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.printTable())}),t._UZ(1,"span",25),t.qZA()}}function L(e,l){if(1&e&&(t.TgZ(0,"tr",31)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t._UZ(7,"td"),t.qZA()),2&e){const n=l.$implicit;t.xp6(2),t.Oqu(n.customer_name),t.xp6(2),t.Oqu(n.today_amount),t.xp6(2),t.Oqu(n.balance_amount)}}function U(e,l){if(1&e&&(t.TgZ(0,"table",30)(1,"tr",31)(2,"th"),t._uU(3,"Customer Name"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Today Bill"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Balance"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Paid"),t.qZA()(),t.YNc(10,L,8,3,"tr",32),t.qZA()),2&e){const n=t.oxw(2);t.xp6(10),t.Q6J("ngForOf",n.dayBillsList1)}}function J(e,l){if(1&e&&(t.TgZ(0,"tr",31)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t._UZ(7,"td"),t.qZA()),2&e){const n=l.$implicit;t.xp6(2),t.Oqu(n.customer_name),t.xp6(2),t.Oqu(n.today_amount),t.xp6(2),t.Oqu(n.balance_amount)}}function F(e,l){if(1&e&&(t.TgZ(0,"div",27)(1,"table",30)(2,"tr",31)(3,"th"),t._uU(4,"Customer Name"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Today Bill"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Balance"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Paid"),t.qZA()(),t.YNc(11,J,8,3,"tr",32),t.qZA()()),2&e){const n=t.oxw(2);t.xp6(11),t.Q6J("ngForOf",n.dayBillsList2)}}function q(e,l){if(1&e&&(t.TgZ(0,"div",26)(1,"div",27),t.YNc(2,U,11,1,"table",28),t.qZA(),t.YNc(3,F,12,1,"div",29),t.qZA()),2&e){const n=t.oxw();t.Q6J("nzGutter",16),t.xp6(2),t.Q6J("ngIf",n.dayBillsList1&&n.dayBillsList1.length>0),t.xp6(1),t.Q6J("ngIf",n.dayBillsList2&&n.dayBillsList2.length>0)}}function I(e,l){1&e&&(t.TgZ(0,"h3",3),t._uU(1,"No Bills"),t.qZA())}const N=[{path:"",component:(()=>{class e{constructor(n,i,a,s,g){this.fb=n,this.el=i,this.message=a,this.mainService=s,this.router=g,this.customers=[],this.vegetablesList=[],this.farmersList=[],this.date=new Date,this.defaultDate=new Date,this.collectionsData=[],this.sort=["ascend"],this.listOfColumns=[{name:"Name",sortOrder:"ascend"},{item:"Item",sortOrder:null},{rate:"Rate",sortOrder:null},{quantity:"quantity",sortOrder:null}],this.index=1,this.total=0,this.pageSize=10,this.loading=!1,this.dayBillsList=[],this.dayBillsList1=[],this.dayBillsList2=[],sessionStorage.getItem("userinfo")||(sessionStorage.clear(),this.message.create("warning","User session expired please login"),this.router.navigateByUrl("/login"))}ngOnInit(){this.dayCollectionForm=this.fb.group({customer:[null],date:[this.date,[r.kI.required]]})}downloadPDF(){v()(this.dayBillTable.nativeElement,{}).then(n=>{const i=n.toDataURL("image/png"),g=208*n.height/n.width,C=new z.default("p","mm","a4");C.addImage(i,"PNG",0,0,208,g),C.save("today_bills.pdf")})}clearfield(n){this.dayCollectionForm.controls[n].reset()}submitForm(){if(this.dayCollectionForm.valid){let i={skip:0,limit:1e3,bill_date:y(this.dayCollectionForm.value.date).format("YYYY-MM-DD")};this.mainService.spinning.emit(!0),this.mainService.getDayBills(i).subscribe(a=>{if(this.dayBillsList=[],this.mainService.spinning.emit(!1),a&&a.length>0)if(this.dayBillsList=a,this.dayBillsList.length<=50)this.dayBillsList1=this.dayBillsList;else if(this.dayBillsList.length>50){let s=this.dayBillsList,g=s.slice(0,50),p=s.slice(50);this.dayBillsList1=g,this.dayBillsList2=p}},a=>{console.log("get customers err ",a),this.loading=!1,this.mainService.spinning.emit(!1)})}else Object.values(this.dayCollectionForm.controls).forEach(n=>{n.invalid&&(n.markAsDirty(),n.updateValueAndValidity({onlySelf:!0}))})}reset(){this.dayCollectionForm.controls.amount.reset(),this.dayCollectionForm.controls.notes.reset()}onChange(n){}deleteConfirm(n){this.loading=!0,this.mainService.removeCollection(n).subscribe(i=>{this.loading=!1,i&&i.success&&this.message.create("success",i.message)},i=>{console.log("get customers err ",i),this.loading=!1})}cancel(){}onPageSizeChange(n){this.pageSize=n}onPageChange(n){this.index=n}printTable(){window.print()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(r.QS),t.Y36(t.SBq),t.Y36(Z.dD),t.Y36(T.J),t.Y36(m.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-day-collections"]],viewQuery:function(n,i){if(1&n&&t.Gf(S,5),2&n){let a;t.iGM(a=t.CRH())&&(i.dayBillTable=a.first)}},decls:33,vars:17,consts:[[1,"customer-form"],["nz-row","",1,"page-header1"],["nz-col","","nzSpan","24"],[1,"text-center"],["nz-row","",1,"page-header2"],["nz-form","","appFocus","",3,"formGroup","ngSubmit"],["nz-row",""],["nz-col","","nzSpan","8"],["nzRequired","",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["formControlName","date",3,"ngModel","nzAllowClear","ngModelChange"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary"],["class","align-right margin-right25",3,"click",4,"ngIf"],["class","align-right margin-right10",3,"click",4,"ngIf"],[1,"print-container"],["dayBillTable",""],["nz-row","",3,"nzGutter",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"text-right"],[3,"nzPageIndex","nzTotal","nzShowSizeChanger","nzPageSize","nzPageIndexChange","nzPageSizeChange"],[1,"align-right","margin-right25",3,"click"],["nz-icon","","nzType","file-pdf","nzTheme","fill"],[1,"align-right","margin-right10",3,"click"],["nz-icon","","nzType","printer","nzTheme","fill"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","12"],["style","width: 100%;",4,"ngIf"],["nz-col","","nzSpan","12",4,"ngIf"],[2,"width","100%"],[2,"text-align","left"],["style","text-align: left;",4,"ngFor","ngForOf"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"Day-wise Bills"),t.qZA()()(),t.TgZ(5,"div",4)(6,"div",2)(7,"form",5),t.NdJ("ngSubmit",function(){return i.submitForm()}),t.TgZ(8,"div",6)(9,"div",7)(10,"nz-form-item")(11,"nz-form-label",8),t._uU(12,"Date"),t.qZA(),t.TgZ(13,"nz-form-control",9)(14,"nz-date-picker",10),t.NdJ("ngModelChange",function(s){return i.date=s})("ngModelChange",function(s){return i.onChange(s)}),t.qZA()()()(),t.TgZ(15,"div",7)(16,"nz-form-item",11)(17,"nz-form-control",12)(18,"button",13),t._uU(19,"Submit"),t.qZA(),t._uU(20,"\xa0 "),t.qZA()()()()()()(),t.TgZ(21,"div",6)(22,"div",2),t.YNc(23,A,2,0,"a",14),t.YNc(24,b,2,0,"a",15),t.TgZ(25,"div",16,17),t.YNc(27,q,4,3,"div",18),t.YNc(28,I,2,0,"h3",19),t.qZA(),t.TgZ(29,"div",20),t._UZ(30,"br"),t.TgZ(31,"nz-pagination",21),t.NdJ("nzPageIndexChange",function(s){return i.onPageChange(s)})("nzPageSizeChange",function(s){return i.onPageSizeChange(s)}),t.qZA(),t._UZ(32,"br"),t.qZA()()()()),2&n&&(t.xp6(7),t.Q6J("formGroup",i.dayCollectionForm),t.xp6(4),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24),t.xp6(1),t.Q6J("ngModel",i.date)("nzAllowClear",!1),t.xp6(3),t.Q6J("nzSpan",14)("nzOffset",6),t.xp6(6),t.Q6J("ngIf",i.dayBillsList&&i.dayBillsList.length>0),t.xp6(1),t.Q6J("ngIf",i.dayBillsList&&i.dayBillsList.length>0),t.xp6(3),t.Q6J("ngIf",i.dayBillsList&&i.dayBillsList.length>0),t.xp6(1),t.Q6J("ngIf",i.dayBillsList&&0===i.dayBillsList.length),t.xp6(3),t.Q6J("nzPageIndex",i.index)("nzTotal",i.total)("nzShowSizeChanger",!0)("nzPageSize",i.pageSize))},dependencies:[c.sg,c.O5,x.Ls,f.t3,f.SK,d.Lr,d.Nx,d.iK,d.Fd,r._Y,r.JJ,r.JL,r.sg,r.u,M.ix,O.w,P.dQ,B.uw,h.Uo,h._C,h.$Z,D.dE],styles:[".margin-right10[_ngcontent-%COMP%]{margin-right:10px}.margin-right20[_ngcontent-%COMP%]{margin-right:20px}.margin-right25[_ngcontent-%COMP%]{margin-right:25px}.phone-select[_ngcontent-%COMP%]{width:70px}.register-are[_ngcontent-%COMP%]{margin-bottom:8px}.customer-form[_ngcontent-%COMP%]{margin-top:20px}nz-date-picker[_ngcontent-%COMP%]{margin:0 8px 12px 0}input[type=number][_ngcontent-%COMP%]{border:1px solid #d9d9d9!important}input[type=number][_ngcontent-%COMP%]:focus{border:1px solid #40a9ff!important}.text-center[_ngcontent-%COMP%]{text-align:center!important}.text-right[_ngcontent-%COMP%]{text-align:right!important}.print-container[_ngcontent-%COMP%]{padding:25px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #000;padding:5px;background-color:#d3d3d3;font-size:12px}td[_ngcontent-%COMP%]{border:1px solid #000;padding:5px;font-size:12px}.align-right[_ngcontent-%COMP%]{float:right}@media print{body[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}.print-container[_ngcontent-%COMP%], .print-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:visible}.page-header1[_ngcontent-%COMP%], .page-header2[_ngcontent-%COMP%], button[_ngcontent-%COMP%], .ant-menu[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{display:none}}"]}),e})()}];let Q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild(N),m.Bz]}),e})();var Y=o(9912);let w=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,Q,Y.m]}),e})()}}]);