"use strict";(self.webpackChunktraders=self.webpackChunktraders||[]).push([[956],{3956:(N,z,a)=>{a.r(z),a.d(z,{CustomerCollectionModule:()=>Q});var u=a(6895),g=a(2564),s=a(433),f=a(5439),t=a(4650),h=a(9651),v=a(2566),S=a(1102),p=a(3679),c=a(6704),d=a(5635),C=a(8231),T=a(6616),Z=a(7044),_=a(1811),F=a(5259),i=a(2587);function x(o,l){if(1&o&&t._UZ(0,"nz-option",24),2&o){const n=l.$implicit;t.Q6J("nzLabel",n.name)("nzValue",n)}}function A(o,l){if(1&o){const n=t.EpF();t.TgZ(0,"span",26),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.clearfield("notes"))}),t.qZA()}}function J(o,l){if(1&o&&t.YNc(0,A,1,0,"span",25),2&o){const n=t.oxw();t.Q6J("ngIf",n.validateForm.controls.notes.value)}}function O(o,l){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&o){const n=l.$implicit;t.xp6(2),t.Oqu(n.customer_name),t.xp6(2),t.Oqu(n.amount),t.xp6(2),t.Oqu(n.notes)}}const b=[{path:"",component:(()=>{class o{constructor(n,e,r,m){this.fb=n,this.el=e,this.message=r,this.mainService=m,this.customers=[{name:"Srinivas",id:"c1"},{name:"Sai",id:"c2"},{name:"Raju",id:"c3"},{name:"Chandu",id:"c4"}],this.vegetablesList=[{name:"Cabage",id:"v1"},{name:"Onion",id:"v2"},{name:"Potato",id:"v3"},{name:"Tomato",id:"v4"}],this.farmersList=[{name:"Teja",id:"f1"},{name:"Ravi",id:"f2"},{name:"Venkatesh",id:"f3"},{name:"Sai",id:"f4"}],this.date=new Date,this.defaultDate=new Date,this.collectionsData=[],this.sort=["ascend"],this.listOfColumns=[{name:"Name",sortOrder:"ascend"},{item:"Item",sortOrder:null},{rate:"Rate",sortOrder:null},{quantity:"quantity",sortOrder:null}],this.index=1,this.total=9,this.pageSize=5,this.loading=!1}ngOnInit(){this.validateForm=this.fb.group({customer:[null,[s.kI.required]],amount:[null,[s.kI.required]],date:[this.date,[s.kI.required]],notes:[null]}),this.getCustomers(),this.getCollections()}getCollections(){document.getElementById("amountCollection")?.focus(),this.loading=!0,this.mainService.getCollections().subscribe(n=>{this.collectionsData=n,this.loading=!1},n=>{console.log("get customers err ",n),this.collectionsData=[],this.loading=!1})}getCustomers(){this.mainService.getCustomers().subscribe(n=>{this.customers=n},n=>{console.log("get customers err ",n),this.customers=[]})}clearfield(n){this.validateForm.controls[n].reset()}submitForm(){if(this.validateForm.valid){console.log("submit",this.validateForm.value);const n=f(this.validateForm.value.date).format("YYYY-MM-DDTHH:mm:ss.000");this.mainService.createCollection({customer_name:this.validateForm.value.customer.name,customer_id:this.validateForm.value.customer._id,notes:this.validateForm.value.notes,amount:this.validateForm.value.amount,collection_date:n}).subscribe(r=>{this.message.create("success","Collection added Successfully"),this.reset(),this.loading=!0,this.getCollections()},r=>{console.log("get customers err ",r),this.loading=!1,this.getCollections()})}else Object.values(this.validateForm.controls).forEach(n=>{n.invalid&&(n.markAsDirty(),n.updateValueAndValidity({onlySelf:!0}))})}reset(){this.validateForm.controls.amount.reset(),this.validateForm.controls.notes.reset()}onChange(n){console.log("onChange: ",n)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(s.QS),t.Y36(t.SBq),t.Y36(h.dD),t.Y36(v.J))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-customer-collection"]],decls:50,vars:34,consts:[[1,"customer-form"],["nz-row",""],["nz-col","","nzSpan","12"],["nz-form","","appFocus","",3,"formGroup","ngSubmit"],["nzRequired","",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["formControlName","date",3,"ngModel","nzAllowClear","ngModelChange"],["nzShowSearch","","nzAllowClear","","formControlName","customer","id","customersCollection"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzFor","amountCollection","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Add amount!",3,"nzSm","nzXs"],["id","amountCollection","type","number","formControlName","amount",3,"min","step"],["nzFor","notes",3,"nzSm","nzXs"],["nzErrorTip","Please input your notes!",3,"nzSm","nzXs","nzValidateStatus"],[1,"ant-input-affix-wrapper-textarea-with-clear-btn",3,"nzSuffix"],["nz-input","","formControlName","notes","placeholder","Notes"],["textAreaClearNotes",""],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary"],["nz-button","","nzType","default",3,"click"],[3,"nzData","nzShowPagination","nzPageIndex","nzTotal","nzPageSize","nzFrontPagination","nzLoading"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],["nz-icon","","class","ant-input-clear-icon","nzTheme","fill","nzType","close-circle",3,"click",4,"ngIf"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon",3,"click"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),t.NdJ("ngSubmit",function(){return e.submitForm()}),t.TgZ(4,"nz-form-item")(5,"nz-form-label",4),t._uU(6,"Date"),t.qZA(),t.TgZ(7,"nz-form-control",5)(8,"nz-date-picker",6),t.NdJ("ngModelChange",function(m){return e.date=m})("ngModelChange",function(m){return e.onChange(m)}),t.qZA()()(),t.TgZ(9,"nz-form-item")(10,"nz-form-label",4)(11,"span"),t._uU(12,"Customer"),t.qZA()(),t.TgZ(13,"nz-form-control",5)(14,"nz-select",7),t.YNc(15,x,1,2,"nz-option",8),t.qZA()()(),t.TgZ(16,"nz-form-item")(17,"nz-form-label",9)(18,"span"),t._uU(19,"Amount"),t.qZA()(),t.TgZ(20,"nz-form-control",10),t._UZ(21,"input",11),t.qZA()(),t.TgZ(22,"nz-form-item")(23,"nz-form-label",12),t._uU(24,"Notes"),t.qZA(),t.TgZ(25,"nz-form-control",13)(26,"nz-input-group",14),t._UZ(27,"textarea",15),t.qZA(),t.YNc(28,J,1,1,"ng-template",null,16,t.W1O),t.qZA()(),t.TgZ(30,"nz-form-item",17)(31,"nz-form-control",18)(32,"button",19),t._uU(33,"Create"),t.qZA(),t._uU(34,"\xa0 "),t.TgZ(35,"button",20),t.NdJ("click",function(){return e.reset()}),t._uU(36,"Reset"),t.qZA()()()()(),t.TgZ(37,"div",2)(38,"nz-table",21,22)(40,"thead")(41,"tr")(42,"th"),t._uU(43,"Customer Name"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"Amount"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"Notes"),t.qZA()()(),t.TgZ(48,"tbody"),t.YNc(49,O,7,3,"tr",23),t.qZA()()()()()),2&n){const r=t.MAs(29);t.xp6(3),t.Q6J("formGroup",e.validateForm),t.xp6(2),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24),t.xp6(1),t.Q6J("ngModel",e.date)("nzAllowClear",!1),t.xp6(2),t.Q6J("nzSm",6)("nzXs",24),t.xp6(3),t.Q6J("nzSm",14)("nzXs",24),t.xp6(2),t.Q6J("ngForOf",e.customers),t.xp6(2),t.Q6J("nzSm",6)("nzXs",24),t.xp6(3),t.Q6J("nzSm",14)("nzXs",24),t.xp6(1),t.Q6J("min",1)("step",1),t.xp6(2),t.Q6J("nzSm",6)("nzXs",24),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24)("nzValidateStatus",e.validateForm.controls.notes),t.xp6(1),t.Q6J("nzSuffix",r),t.xp6(5),t.Q6J("nzSpan",14)("nzOffset",6),t.xp6(7),t.Q6J("nzData",e.collectionsData)("nzShowPagination",!0)("nzPageIndex",e.index)("nzTotal",e.total)("nzPageSize",e.pageSize)("nzFrontPagination",!1)("nzLoading",e.loading),t.xp6(11),t.Q6J("ngForOf",e.collectionsData)}},dependencies:[u.sg,u.O5,S.Ls,p.t3,p.SK,c.Lr,c.Nx,c.iK,c.Fd,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.qQ,s.sg,s.u,d.Zp,d.gB,d.ke,C.Ip,C.Vq,T.ix,Z.w,_.dQ,F.uw,i.N8,i.Uo,i._C,i.Om,i.p0,i.$Z],styles:["[nz-form][_ngcontent-%COMP%]{max-width:600px}.phone-select[_ngcontent-%COMP%]{width:70px}.register-are[_ngcontent-%COMP%]{margin-bottom:8px}.customer-form[_ngcontent-%COMP%]{margin-top:20px}nz-date-picker[_ngcontent-%COMP%]{margin:0 8px 12px 0}input[type=number][_ngcontent-%COMP%]{border:1px solid #d9d9d9!important}input[type=number][_ngcontent-%COMP%]:focus{border:1px solid #40a9ff!important}"]}),o})()}];let y=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.Bz.forChild(b),g.Bz]}),o})();var M=a(4973);let Q=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,y,M.m]}),o})()}}]);